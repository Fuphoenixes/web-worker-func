!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).webWorkerFuncBuilder=e()}(this,function(){"use strict";var e={timeout:0,importScripts:[],depsFunc:[],transferable:!0},u=function(n){var a=n.fn,i=n.transferable;return function(n){var e,t=n.data;try{var r=a.apply(void 0,t),o=i&&(e=r,"ArrayBuffer"in self&&e instanceof ArrayBuffer||"MessagePort"in self&&e instanceof MessagePort||"ImageBitmap"in self&&e instanceof ImageBitmap||"OffscreenCanvas"in self&&e instanceof self.OffscreenCanvas)?[r]:[];postMessage(["SUCCESS",r],o)}catch(n){postMessage(["ERROR",n])}}},l=function(n){return 0===n.length?"":(n=n.map(function(n){return"'".concat(n,"'")}).toString(),"importScripts(".concat(n,");"))},p=function(n){return 0===n.length?"":n.map(function(n){return"var ".concat(n.name," = ").concat(n)}).join(";")};return function(f,n){var s=Object.assign(e,n);return function(){for(var c=[],n=0;n<arguments.length;n++)c[n]=arguments[n];return new Promise(function(t,r){function o(){a.terminate(),URL.revokeObjectURL(e),s.timeout&&window.clearTimeout(n)}var n,e=function(n,e,t,r){e="\n    ".concat(l(e),"\n    ").concat(p(t),"\n    onmessage=(").concat(u,")({ fn: (").concat(n,"), transferable: ").concat(r," })\n  "),t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)}(f,s.importScripts,s.depsFunc,s.transferable),a=new Worker(e),i=s.transferable?c.filter(function(n){return"ArrayBuffer"in window&&n instanceof ArrayBuffer||"MessagePort"in window&&n instanceof MessagePort||"ImageBitmap"in window&&n instanceof ImageBitmap||"OffscreenCanvas"in window&&n instanceof window.OffscreenCanvas}):[];a.postMessage(function(n,e,t){if(t||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}([],c,!0),i),a.onmessage=function(n){var n=n.data,e=n[0],n=n[1];("SUCCESS"===e?t:r)(n),o()},a.onerror=function(n){r(n),o()},s.timeout&&(n=window.setTimeout(function(){r("worker timeout"),o()},s.timeout))})}}});
