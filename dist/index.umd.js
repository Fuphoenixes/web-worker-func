!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).webWorkerFuncBuilder=n()}(this,function(){"use strict";var n={timeout:0,importScripts:[],transferable:!0},u=function(e){var a=e.fn,i=e.transferable;return function(e){var n,t=e.data;try{var r=a.apply(void 0,t),o=i&&(n=r,"ArrayBuffer"in self&&n instanceof ArrayBuffer||"MessagePort"in self&&n instanceof MessagePort||"ImageBitmap"in self&&n instanceof ImageBitmap||"OffscreenCanvas"in self&&n instanceof self.OffscreenCanvas)?[r]:[];postMessage(["SUCCESS",r],o)}catch(e){postMessage(["ERROR",e])}}},l=function(e){return 0===e.length?"":(e=e.map(function(e){return"'".concat(e,"'")}).toString(),"importScripts(".concat(e,");"))};return function(s,e){var c=Object.assign(n,e);return function(){for(var f=[],e=0;e<arguments.length;e++)f[e]=arguments[e];return new Promise(function(t,r){function o(){a.terminate(),URL.revokeObjectURL(n),c.timeout&&window.clearTimeout(e)}var e,n=function(e,n,t){n="\n    ".concat(l(n),"\n    onmessage=(").concat(u,")({ fn: (").concat(e,"), transferable: ").concat(t," })\n  "),e=new Blob([n],{type:"text/javascript"});return URL.createObjectURL(e)}(s,c.importScripts,c.transferable),a=new Worker(n),i=c.transferable?f.filter(function(e){return"ArrayBuffer"in window&&e instanceof ArrayBuffer||"MessagePort"in window&&e instanceof MessagePort||"ImageBitmap"in window&&e instanceof ImageBitmap||"OffscreenCanvas"in window&&e instanceof window.OffscreenCanvas}):[];a.postMessage(function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([],f,!0),i),a.onmessage=function(e){var e=e.data,n=e[0],e=e[1];("SUCCESS"===n?t:r)(e),o()},a.onerror=function(e){r(e),o()},c.timeout&&(e=window.setTimeout(function(){r("worker timeout"),o()},c.timeout))})}}});
